/**
 * Crée un élément du dom, lui ajoute du texte, le place comme dernier
 * enfant de parent et ajoute un attribut en utilisant le paramètre attribute
 * @param {String} markup_name
 * @param {String} text
 * @param {domElement} parent
 * @param {Object} attribute  (doit comprendre les propriétés name et value)
 * @param {Array} attributes
 * @returns domElement
 */
function createMarkup(e,s,t,a){var n,o=document.createElement(e);o.textContent=s,t.appendChild(o);for(n of a)n&&n.hasOwnProperty("name")&&
// console.log(attribute);
o.setAttribute(n.name,n.value);return o}
// ID de depart
let numActuel=1;
// Nombre de pokemon affichés
const pagiMax=10;
// Fonction pour formater les id à 3 characteres
function pad(e,s){e="00"+e;return e.slice(e.length-s)}
// Fonction pour creer la section d'un pokemon
function creaPokeHtml(s){var e=createMarkup("section","",sectionPoke,[{name:"class",value:"card-pokedex"}]);let t="";
// Voir operateur ternaire
if(125===s.pokedexId)
//car erreur dans l'api
t+=`<div class="cont-type-pokedex">
            <img src="https://raw.githubusercontent.com/Yarkis01/PokeAPI/images/types/electrik.png" class="img-type">
            <h4 class="type-pokedex bg-Électrik">Électrik</h4>
        </div>`;else{let e=1;//pour classe css
for(const n of s.types)
//enumeration de chaque type du poke pour creation de l'html
t+=`<div class="cont-type-pokedex${e}">
            <img src=${n.image} class="img-type">
            <h4 class="type-pokedex bg-${n.name}">${n.name}</h4>
        </div>`,e++}
// Creation de l'html de talents
let a="";if(1===s.talents.length)a=`<h3 class="h3-pokedexT">Talent</h3>
        <p class="para-pokedex">${s.talents[0].name}</p>`;else{a='<h3 class="h3-pokedexT">Talents</h3>';for(const o of s.talents)a+=`
            <p class="para-pokedex-2">${o.name}</p>`}
// Création de l'html pour chaque rang pokedex
e.innerHTML=`
    <div class="cont-pokedex-01">
        <h3 class="h3-pokedex">No.</h3>
        <p class="text-pokedex-01">${pad(s.pokedexId,3)}</p>
    </div>
    <section class="cont-02et03">
        <div class="cont-pokedex-02">
            <img src=${s.sprites.regular} class="img-pokemon">
        </div>
        <section class="cont-pokedex-03">
            <h3 class="h3-pokedex">Pokémon</h3>
            <div class="nom-poke">
                <p class="para-pokedex">${s.name.fr}</p>
                <span class="span-pokedex">FR</span>
            </div>
            <div class="nom-poke">
                <p class="para-pokedex">${s.name.en}</p>
                <span class="span-pokedex">EN</span>
            </div>
        </section>
    </section>
    <section class="cont-04et05">
        <section>
            <h3 class="h3-pokedex">Type</h3>
            ${t}
        </section>
        <section class="cont-pokedex-05">
            ${a}
        </section>
    </section>
    <section class="cont-last-pokedex">
        <h3 class="h3-pokedex">Statistiques de base</h3>
        <div class="cont-stats-pokedex">
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">PV</h4>
                <span class="span-stat">${s.stats.hp}</span>
            </div>
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">Atq</h4>
                <span class="span-stat">${s.stats.atk}</span>
            </div>
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">Def</h4>
                <span class="span-stat">${s.stats.def}</span>
            </div>
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">ASpé</h4>
                <span class="span-stat">${s.stats.spe_atk}</span>
            </div>
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">DSpé</h4>
                <span class="span-stat">${s.stats.spe_def}</span>
            </div>
            <div class="stat-pokedex">
                <h4 class="h4-pokedex">Vit</h4>
                <span class="span-stat">${s.stats.vit}</span>
            </div>
        </div>
    </section>`}
// Fonction pour creer les sections d'un nombre de pokemons donnés
function creaPokeHtmlPagination(e,s,t){
// Methode 1
// if (numStart === 151) {
//     creaPokeHtml(pokedex[150]);
//     numActuel = 1;
// } else {
//     for (let i = numStart; i < numStart + numIteration; i++) {
//         creaPokeHtml(pokedex[i - 1]);
//     }
//     numActuel = numStart + numIteration;
// }
// Methode plus opti
for(;0!==t;)creaPokeHtml(e[(s=152===s?1:s)-1]),s++,t--;numActuel=s}
// Création de la section hote
const sectionPoke=createMarkup("section","",document.querySelector("main"),[]),pokedex=fetch("https://api-pokemon-fr.vercel.app/api/v1/gen/1").then(function(e){if(200!==e.status)throw new Error("Le serveur n'a pas répondu correctement");return e.json()}).then(function(e){
// console.log("Pokedex : ", pokedex);
// Tout le pokedex
// for (let pokemon of pokedex) {
//     creaPokeHtml(pokemon);
// }
// Création des sections HTML
creaPokeHtmlPagination(e,numActuel,pagiMax);return window.addEventListener("scroll",()=>{window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&creaPokeHtmlPagination(e,numActuel,pagiMax)}),e}).catch(e=>{console.log("Erreur attrapée : ",e)});
// Fetch de toutes les données sur api-pokemon-fr